<!DOCTYPE html>
<html lang="en">

<head>
    <title>Forgot Password</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" th:href="@{'/css/output.css'}">
    <link rel="stylesheet" th:href="@{'/css/style.css'}">
</head>

<body class="bg-gray-100 flex justify-center items-center h-screen">

    <div class="bg-white p-8 rounded-lg shadow-lg max-w-md w-full">
        <h2 class="text-2xl font-bold text-center text-gray-700 mb-4">Forgot Password</h2>
        <p class="text-sm text-center text-gray-500 mb-6">Enter your email to receive an OTP and reset your password.
        </p>

        <form method="POST" action="/reset-password" th:object="${forgotPasswordForm}">
            <!-- Email Input -->
            <div class="mb-3"> 
                <label for="email" class="block text-sm font-medium text-gray-700 mb-1">Email Address</label>
                <input type="email" th:field="*{email}" id="email" required
                    class="w-full px-3 py-2 border border-gray-300 rounded-lg text-gray-700 focus:outline-none focus:ring focus:ring-blue-200 focus:border-blue-500"
                    placeholder="example@gmail.com">
            </div>

            <p id="email-ErrorMessage" class="text-red-500 mb-3"> <!-- email related err message will be shown here --></p>

            <!-- Send OTP Button -->
            <div class="mb-4">
                <button type="button" id="sendOtpButton"
                    class="w-full bg-blue-600 text-white font-medium py-2 rounded-lg hover:bg-blue-700 focus:ring focus:ring-blue-300">
                    Send OTP
                </button>
            </div>

            <!-- OTP Input -->
            <div class="mb-4 hidden" id="otpSection">
                <label for="otp" class="block text-sm font-medium text-gray-700 mb-1">Enter OTP</label>
                <input type="text" th:field="*{otp}" id="otp" required
                    class="w-full px-3 py-2 border border-gray-300 rounded-lg text-gray-700 focus:outline-none focus:ring focus:ring-blue-200 focus:border-blue-500"
                    placeholder="Enter OTP">
                    <p th:if="${#fields.hasErrors('otp')}" th:errors="*{otp}"
                    class="text-red-600 py-2 px-1">
                </p>
            </div>

            <!-- New Password Input -->
            <div class="mb-4 hidden" id="passwordSection">
                <label for="password" class="block text-sm font-medium text-gray-700 mb-1">New Password</label>
                <input type="password" th:field="*{password}" id="password" required
                    class="w-full px-3 py-2 border border-gray-300 rounded-lg text-gray-700 focus:outline-none focus:ring focus:ring-blue-200 focus:border-blue-500"
                    placeholder="New Password">
                <p th:if="${#fields.hasErrors('password')}" th:errors="*{password}"
                    class="text-red-600 py-2 px-1">
                </p>
            </div>

            <!-- Confirm Password Input -->
            <div class="mb-4 hidden" id="confirmPasswordSection">
                <label for="confirmPassword" class="block text-sm font-medium text-gray-700 mb-1">Confirm
                    Password</label>
                <input type="password" th:field="*{confirmPassword}" id="confirmPassword" required
                    class="w-full px-3 py-2 border border-gray-300 rounded-lg text-gray-700 focus:outline-none focus:ring focus:ring-blue-200 focus:border-blue-500"
                    placeholder="Confirm Password">
            </div>

            <!-- other err message(invalid otp, passwords should match) -->
            <p id="error-message" class="text-red-500 mb-3"></p>

            <div th:if="${invalidInputs}" id="errorSection">
                <!-- Error message of form elements with validation errors -->
            </div>

            <!-- Submit Button -->
            <div class="hidden" id="submitButton">
                <button type="submit"
                    class="w-full bg-green-600 text-white font-medium py-2 rounded-lg hover:bg-green-700 focus:ring focus:ring-green-300">
                    Reset Password
                </button>
            </div>
        </form>
    </div>

    <script th:src="@{'/js/forgot_password.js'}"></script>
</body>

</html>